{"version":3,"file":"ApiKeyManager.js","sourceRoot":"","sources":["../../src/ApiKeyManager.ts"],"names":[],"mappings":"AAAA;gBACgB;AAGhB,OAAO,EAAE,yBAAyB,EAAE,MAAM,gCAAgC,CAAC;AAW3E;;;;;;;;;;GAUG;AACH,MAAM,OAAO,aACX,SAAQ,yBAAyB;IAqBjC,YAAY,OAAuB;QACjC,KAAK,CAAC,OAAO,CAAC,CAAC;QAnBjB;;WAEG;QACa,WAAM,GAAW,qCAAqC,CAAC;QAiBrE,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC;IACzB,CAAC;IAdD;;OAEG;IACI,MAAM,CAAC,OAAO,CAAC,MAA+B;QACnD,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;YAC9B,OAAO,IAAI,aAAa,CAAC,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC,CAAC;SAC3C;aAAM;YACL,OAAO,IAAI,aAAa,CAAC,MAAM,CAAC,CAAC;SAClC;IACH,CAAC;IAOD;;OAEG;IACI,QAAQ,CAAC,GAAW;QACzB,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACnC,CAAC;CACF;AAED;;;GAGG,CAAC,0BAA0B;AAC9B,MAAM,UAAU,MAAM,CAAC,OAAuB;IAC5C,OAAO,CAAC,GAAG,CACT,mEAAmE,CACpE,CAAC;IAEF,OAAO,IAAI,aAAa,CAAC,OAAO,CAAC,CAAC;AACpC,CAAC","sourcesContent":["/* Copyright (c) 2017-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\nimport { IAuthenticationManager } from \"./utils/IAuthenticationManager.js\";\nimport { AuthenticationManagerBase } from \"./AuthenticationManagerBase.js\";\n\n/**\n * Options for the `ApiKey` constructor.\n */\nexport interface IApiKeyOptions {\n  key: string;\n  username?: string;\n  portal?: string;\n}\n\n/**\n * Used to authenticate methods in ArcGIS REST JS with an API keys. The instance of `ApiKeyManager` can be passed to  {@linkcode IRequestOptions.authentication} to authenticate requests.\n * \n * ```js\n * import { ApiKeyManager } from '@esri/arcgis-rest-request';\n \n * const apiKey = new ApiKeyManager.fromKey(\"...\");\n * ```\n * \n * In most cases however the API key can be passed directly to the {@linkcode IRequestOptions.authentication}.\n */\nexport class ApiKeyManager\n  extends AuthenticationManagerBase\n  implements IAuthenticationManager\n{\n  /**\n   * The current portal the user is authenticated with.\n   */\n  public readonly portal: string = \"https://www.arcgis.com/sharing/rest\";\n\n  private key: string;\n\n  /**\n   * The preferred method for creating an instance of `ApiKeyManager`.\n   */\n  public static fromKey(apiKey: string | IApiKeyOptions) {\n    if (typeof apiKey === \"string\") {\n      return new ApiKeyManager({ key: apiKey });\n    } else {\n      return new ApiKeyManager(apiKey);\n    }\n  }\n\n  constructor(options: IApiKeyOptions) {\n    super(options);\n    this.key = options.key;\n  }\n\n  /**\n   * Gets a token (the API Key).\n   */\n  public getToken(url: string) {\n    return Promise.resolve(this.key);\n  }\n}\n\n/**\n * @deprecated - Use {@linkcode ApiKeyManager}.\n * @internal\n */ /* istanbul ignore next */\nexport function ApiKey(options: IApiKeyOptions) {\n  console.log(\n    \"DEPRECATED:, 'ApiKey' is deprecated. Use 'ApiKeyManager' instead.\"\n  );\n\n  return new ApiKeyManager(options);\n}\n"]}